<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Two Hours to Find a Swapped String | Yannis Rizos</title><link rel=canonical href=https://dev.to/yrizos/two-hours-to-find-a-swapped-string-4jba><link rel=icon type=image/png sizes=180x180 href=/images/avatar/avatar-180x180-rounded.png><link rel=icon type=image/x-icon href=/images/avatar/avatar-180x180-rounded.ico><link rel=apple-touch-icon sizes=180x180 href=/images/avatar/avatar-180x180-rounded.png><meta name=description content="Early in my career, I landed a job where I was finally writing production code that mattered. The company had an ERP system and an e-commerce platform, and needed them to communicate with each other. …"><meta name=author content="Yannis Rizos"><meta property="og:type" content="article"><meta property="og:title" content="Two Hours to Find a Swapped String"><meta property="og:site_name" content="Yannis Rizos"><meta property="og:url" content="https://yrizos.com/writing/two-hours-to-find-a-swapped-string/"><meta property="og:locale" content="-"><meta property="og:description" content="Early in my career, I landed a job where I was finally writing production code that mattered. The company had an ERP system and an e-commerce platform, and needed them to communicate with each other. …"><meta property="article:published_time" content="2025-11-14T02:16:25Z"><meta property="article:modified_time" content="2025-11-14T02:16:25Z"><meta property="article:author" content="Yannis Rizos"><meta property="article:section" content="Writing"><meta property="article:tag" content="ddd"><meta property="article:tag" content="valueobject"><meta property="article:tag" content="types"><meta name=twitter:card content="summary"><meta name=twitter:title content="Two Hours to Find a Swapped String"><meta name=twitter:description content="Early in my career, I landed a job where I was finally writing production code that mattered. The company had an ERP system and an e-commerce platform, and needed them to communicate with each other. …"><link rel=alternate type=application/rss+xml href=https://yrizos.com/feed.xml title="Yannis Rizos"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"\"Two Hours to Find a Swapped String\"","url":"\"https://yrizos.com/writing/two-hours-to-find-a-swapped-string/\"","datePublished":"\"2025-11-14T02:16:25Z\"","dateModified":"\"2025-11-14T02:16:25Z\"","author":{"@type":"Person","name":"\"Yannis Rizos\"","url":"\"https://yrizos.com/\""},"publisher":{"@type":"Person","name":"\"Yannis Rizos\""},"description":"\"Early in my career, I landed a job where I was finally writing production code that mattered. The company had an ERP system and an e-commerce platform, and needed them to communicate with each other. …\"","keywords":"[\"ddd\",\"valueobject\",\"types\"]","mainEntityOfPage":{"@type":"WebPage","@id":"\"https://yrizos.com/writing/two-hours-to-find-a-swapped-string/\""}}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Person","name":"\"Yannis Rizos\"","url":"\"https://yrizos.com/\"","sameAs":["\"https://www.linkedin.com/in/yrizos/\"","\"https://github.com/yrizos\"","\"https://medium.com/@yrizos\""]}</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Domine:wght@400..700&family=Inclusive+Sans:ital,wght@0,300..700;1,300..700&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" as=style><link href="https://fonts.googleapis.com/css2?family=Domine:wght@400..700&family=Inclusive+Sans:ital,wght@0,300..700;1,300..700&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel=stylesheet><link rel=stylesheet href=/css/main.min.448a73f71c5bd8925001f33a02e482242acddc4f3a6399c4aa4ab9978779d932.css integrity="sha256-RIpz9xxb2JJQAfM6AuSCJCrN3E86Y5nEqkq5l4d52TI=" crossorigin=anonymous><script src=/js/main.afdf8a9a96cdabd024cf6ec78dc6c0e2643c24fc6117098296bbf075df801462.js integrity="sha256-r9+KmpbNq9Akz27HjcbA4mQ8JPxhFwmClrvwdd+AFGI=" crossorigin=anonymous defer></script><script data-goatcounter=https://yrizos.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body><div class=reading-progress id=reading-progress aria-hidden=true></div><div class=site-container><header class=site-header><div class=site-title><a href=/>Yannis Rizos</a></div><nav class=site-nav aria-label="Primary navigation"><ul><li><a href=/>Home</a></li><li><span class=site-nav__separator aria-hidden=true></span></li><li><a href=/writing/>Writing</a></li><li><span class=site-nav__separator aria-hidden=true></span></li><li><a href=/reading/>Reading</a></li><li><span class=site-nav__separator aria-hidden=true></span></li><li><a href=/about/>About</a></li></ul></nav></header><main class=site-main><article class=post><header class=post-header><h1 class=post-title>Two Hours to Find a Swapped String</h1><div class=post-meta><time class=post-meta__date datetime=2025-11-14T02:16:25+00:00>November 14, 2025</time><span class=post-meta__separator aria-hidden=true></span>
<span class=post-meta__reading>8 min read</span></div></header><div class=post-content><p>Early in my career, I landed a job where I was finally writing production code that mattered. The company had an ERP system and an e-commerce platform, and needed them to communicate with each other. My job was to build the integration layer that would keep product data flowing between them.</p><p>The requirements seemed straightforward enough. The ERP would send product information, my system would translate it, and the store would receive it. Both systems used product codes to identify items, and since those codes looked like ordinary strings, I treated them as ordinary strings. That&rsquo;s what the rest of the codebase did, and it felt like the natural choice.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>bridgeItem</span>(<span style=color:#a6e22e>erpCode</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>storeCode</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>record</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readErp</span>(<span style=color:#a6e22e>erpCode</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>writeStore</span>(<span style=color:#a6e22e>storeCode</span>, <span style=color:#a6e22e>record</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The function signatures looked clean. The calls looked reasonable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#a6e22e>bridgeItem</span>(
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>product</span>.<span style=color:#a6e22e>code</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mapping</span>.<span style=color:#a6e22e>targetCode</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>As a sidenote, TypeScript didn&rsquo;t exist back then. The actual code was Java, but I <em>really don&rsquo;t love Java</em>.</p><h2 id=for-a-while-everything-worked-fine>For a while, everything worked fine.</h2><p>Then, one afternoon, a product stopped appearing in the store. It should have been a quick fix. I expected to find some data validation issue or maybe a network timeout. Instead, I spent nearly two hours jumping between files trying to understand what had gone wrong. The system had multiple layers (controllers, services, helpers, integration adapters) and every function accepted plain strings. Nothing in the signatures gave me any hint about which string represented which concept.</p><p>By the time I traced the problem to its source, I discovered I&rsquo;d passed the store code where the ERP code should have been. The function had accepted both values without complaint because they were both strings. The type system had nothing to say about it. I fixed the bug in about thirty seconds. Then I sat there feeling annoyed that I&rsquo;d wasted two hours on something so trivial.</p><p>I remember thinking there had to be a better way to write this kind of code. Not some grand revelation. Just frustration mixed with the feeling that my tools should have caught this.</p><h2 id=the-pattern-kept-appearing>The Pattern Kept Appearing</h2><p>Once I noticed the problem, I started seeing it everywhere in the codebase. We had product codes from the ERP, internal codes used only within our system, and store codes required by the e-commerce platform. Each type of code followed different validation rules and represented a completely different concept, but they all looked identical to TypeScript&rsquo;s type system.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ProductCode</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>InternalCode</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>StoreCode</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>string</span>
</span></span></code></pre></div><p>These type aliases were essentially documentation. They described intent without enforcing anything. The compiler treated them all as interchangeable strings, which meant I could accidentally pass one where another belonged, and the code would compile without warnings.</p><p>Boolean flags created similar confusion. One boolean meant the product was ready for sync. Another suggested it was active in the store. Another indicated whether the last sync had completed successfully. The names tried to communicate meaning, but the function signatures offered no protection.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isReady</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>isActive</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>isSynced</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>runSync</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Numbers presented their own challenges. Some represented milliseconds, others represented seconds, and others represented retry attempts. Without examining the implementation, you couldn&rsquo;t tell which unit a function expected.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>scheduleRetry</span>(<span style=color:#a6e22e>delay</span>: <span style=color:#66d9ef>number</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>runRetry</span>, <span style=color:#a6e22e>delay</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Calling this function with the wrong unit would compile successfully and fail at runtime.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#a6e22e>scheduleRetry</span>(<span style=color:#ae81ff>5</span>)
</span></span></code></pre></div><p>The pattern was consistent. I was using primitive types to represent domain concepts, and then compensating by scattering validation logic throughout the codebase.</p><h2 id=learning-it-had-a-name>Learning It Had a Name</h2><p>A few years later, I was reading about common code smells when I came across an article on Refactoring Guru that described exactly what I&rsquo;d been doing. It seems I was <a href=https://refactoring.guru/smells/primitive-obsession>obsessed with primitives</a>:</p><blockquote><p>Primitive Obsession is a code smell that arises when simple primitive types are used instead of small objects for simple tasks</p></blockquote><p>Reading that article felt like finding out other people had been dealing with the same problem. I hadn&rsquo;t invented a new way to write confusing code. I&rsquo;d been following a well-documented antipattern. The validation checks I&rsquo;d scattered everywhere, the confusion about which string meant what, the hours spent tracing values through multiple files: all of it was a predictable consequence of representing meaningful domain concepts as primitive types.</p><h2 id=what-i-would-do-differently-now>What I Would Do Differently Now</h2><p>If I were building that old system today, I&rsquo;d give each domain concept its own type. A product code wouldn&rsquo;t just be a string. It would be a class that knew how to validate itself and made its purpose explicit. In Domain-Driven Design, these are called Value Objects: small types defined by their attributes rather than any identity.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductCode</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>trim</span>() <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;&#34;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Invalid product code&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>raw</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>With this structure, the function signature communicates much more clearly what it expects.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>bridgeItem</span>(
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>erpProductCode</span>: <span style=color:#66d9ef>ProductCode</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>storeProductCode</span>: <span style=color:#66d9ef>ProductCode</span>
</span></span><span style=display:flex><span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>record</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readErp</span>(<span style=color:#a6e22e>erpProductCode</span>.<span style=color:#a6e22e>raw</span>())
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>writeStore</span>(<span style=color:#a6e22e>storeProductCode</span>.<span style=color:#a6e22e>raw</span>(), <span style=color:#a6e22e>record</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If I tried to pass a store code where an ERP code belonged, TypeScript would catch it immediately. The type system could finally help instead of staying silent.</p><p>The same approach works for other domain concepts. Time values become clearer when they carry their unit with them.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Milliseconds</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>number</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Negative time not allowed&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>raw</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now the scheduling function&rsquo;s signature tells you exactly what it needs.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>scheduleRetry</span>(<span style=color:#a6e22e>delay</span>: <span style=color:#66d9ef>Milliseconds</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>runRetry</span>, <span style=color:#a6e22e>delay</span>.<span style=color:#a6e22e>raw</span>())
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You can&rsquo;t accidentally pass seconds or retry counts. The compiler won&rsquo;t allow it.</p><p>Some domain concepts benefit from carrying behavior alongside their data. A dimensions class can validate its inputs and calculate derived values.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dimensions</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>width</span>: <span style=color:#66d9ef>number</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>height</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>  ) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>width</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Invalid dimensions&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>area</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>height</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Each class enforces its own invariants. The validation logic lives in one place instead of being duplicated across the codebase.</p><h2 id=why-this-approach-helps>Why This Approach Helps</h2><p>Once you start wrapping primitives in domain-specific types, several things improve. You stop writing the same validation checks in multiple places. You stop worrying about mixing up parameters. Function signatures become self-documenting. The type system starts working with you instead of being indifferent to your mistakes.</p><p>Martin Fowler discusses Value Objects in his <a href=https://martinfowler.com/bliki/EvansClassification.html>summary of the Evans classification</a>. The key insight is that Value Objects are defined by their attributes rather than their identity. Two <code>ProductCode</code> instances with the same internal value are functionally equivalent, which is exactly what you want for this kind of domain modeling.</p><p>A monetary value makes a good example of this pattern in action.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Money</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>amount</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>amount</span>: <span style=color:#66d9ef>number</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>amount</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Invalid amount&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>amount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>amount</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>raw</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>amount</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Functions that work with money become more explicit about their contracts.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>publish</span>(<span style=color:#a6e22e>price</span>: <span style=color:#66d9ef>Money</span>, <span style=color:#a6e22e>discount</span>: <span style=color:#66d9ef>Money</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>applyRules</span>(<span style=color:#a6e22e>price</span>, <span style=color:#a6e22e>discount</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The signatures tell you what&rsquo;s expected. The classes enforce the rules. The compiler catches mismatches.</p><h2 id=where-this-pattern-fits>Where This Pattern Fits</h2><p>This approach scales well across different types of systems. It works in integration layers where data crosses boundaries. It works in domain-rich applications where business rules matter. It works anywhere the cost of confusion exceeds the cost of creating a few extra classes.</p><p>Rico Fritzsche demonstrates these patterns in realistic scenarios in his <a href=https://ricofritzsche.me/value-objects-implementing-domain-driven-design-by-example>example-driven walkthrough</a>. His examples show how small domain types compose together in more complex flows.</p><p>Here&rsquo;s another example that keeps validation close to the data.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EmailAddress</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> <span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>constructor</span>(<span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>includes</span>(<span style=color:#e6db74>&#34;@&#34;</span>)) <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Invalid email&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>raw</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Each type makes its constraints explicit. Each type protects its own invariants. The result is code where intent is visible and mistakes are harder to make.</p><h2 id=what-i-took-from-the-experience>What I Took From the Experience</h2><p>I never went back and rewrote that old integration system. By the time I understood the pattern well enough to know how I&rsquo;d fix it, the project had moved on, and so had I. But the experience stuck with me. Those two hours I spent tracking down a swapped parameter taught me more than any blog post could have.</p><p>These days, I try to use Value Objects by default. Not because of some architectural dogma. Not because Domain-Driven Design says so, though that&rsquo;s where they come from. Because the work becomes easier when domain concepts have an explicit structure. The code reads better. The compiler helps more. The bugs show up earlier.</p><p>Domain-Driven Design gave Value Objects their formal name and placed them within a larger framework, but the practical benefit stands on its own. When you stop representing meaningful concepts as primitive types, the code becomes easier to reason about.</p><p>That&rsquo;s worth the extra few lines of class definition.</p></div><footer class=post-footer><hr><div class=post-original-notice>Originally published at <a href=https://dev.to/yrizos/two-hours-to-find-a-swapped-string-4jba target=_blank rel="noopener noreferrer"><span>dev.to/yrizos</span></a></div><div class=post-license><a href=https://creativecommons.org/licenses/by/4.0/ target=_blank rel="noopener noreferrer" aria-label="Creative Commons Attribution 4.0 License"><span class=icon aria-hidden=true><svg viewBox="0 0 496 512"><path d="M245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93-22.13.0-33.22 14.61-33.22 43.84.0 23.57 9.21 43.84 33.22 43.84 14.47.0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98-22.6.0-73.96-10.32-73.96-77.05.0-58.69 43-77.06 72.63-77.06 30.72-.01 52.7 11.95 65.99 35.86zm143.05.0-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93-22.14.0-33.22 14.61-33.22 43.84.0 23.55 9.23 43.84 33.22 43.84 14.45.0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98-22.69.0-73.96-9.87-73.96-77.05.0-58.67 42.97-77.06 72.63-77.06 30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05.0 123.11.0 256.05c0 138.49 113.6 248 247.56 248 129.93.0 248.44-100.87 248.44-248 0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54.0-203.7-93.04-203.7-202.81.0-105.42 85.43-203.27 203.72-203.27 112.53.0 202.82 89.46 202.82 203.26-.01 121.69-99.68 202.82-202.84 202.82z"/></svg></span>
<span class=icon aria-hidden=true><svg viewBox="0 0 496 512"><path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3 3.1-3.1 6.9-4.7 11.3-4.7H299c4.1.0 7.8 1.6 11.1 4.7 3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5.0 256 0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8 103.2.0 202.8-81.1 202.8-202.8.1-113.8-90.2-203.3-202.8-203.3z"/></svg></span>
<span>CC BY 4.0</span></a></div></footer></article></main><footer class=site-footer><div class=social-icons aria-label="Social media links"><a href=https://www.linkedin.com/in/yrizos/ target=_blank rel="noopener noreferrer" aria-label=LinkedIn><span class=icon aria-hidden=true><svg viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span>
</a><a href=https://github.com/yrizos target=_blank rel="noopener noreferrer" aria-label=GitHub><span class=icon aria-hidden=true><svg viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
</a><a href=https://medium.com/@yrizos target=_blank rel="noopener noreferrer" aria-label=Medium><span class=icon aria-hidden=true><svg viewBox="0 0 640 512"><path d="M180.5 74.262C80.813 74.262.0 155.633.0 256S80.819 437.738 180.5 437.738 361 356.373 361 256 280.191 74.262 180.5 74.262zm288.25 10.646c-49.845.0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559C559 161.5 518.6 84.908 468.752 84.908zm139.506 17.821c-17.526.0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271z"/></svg></span>
</a><a href=https://www.goodreads.com/user/show/68793210-yannis-rizos target=_blank rel="noopener noreferrer" aria-label=Goodreads><span class=icon aria-hidden=true><svg viewBox="0 0 448 512"><path d="M299.9 191.2c5.1 37.3-4.7 79-35.9 100.7-22.3 15.5-52.8 14.1-70.8 5.7-37.1-17.3-49.5-58.6-46.8-97.2 4.3-60.9 40.9-87.9 75.3-87.5 46.9-.2 71.8 31.8 78.2 78.3zM448 88v336c0 30.9-25.1 56-56 56H56c-30.9.0-56-25.1-56-56V88c0-30.9 25.1-56 56-56h336c30.9.0 56 25.1 56 56zM330 313.2s-.1-34-.1-217.3h-29v40.3c-.8.3-1.2-.5-1.6-1.2-9.6-20.7-35.9-46.3-76-46-51.9.4-87.2 31.2-100.6 77.8-4.3 14.9-5.8 30.1-5.5 45.6 1.7 77.9 45.1 117.8 112.4 115.2 28.9-1.1 54.5-17 69-45.2.5-1 1.1-1.9 1.7-2.9.2.1.4.1.6.2.3 3.8.2 30.7.1 34.5-.2 14.8-2 29.5-7.2 43.5-7.8 21-22.3 34.7-44.5 39.5-17.8 3.9-35.6 3.8-53.2-1.2-21.5-6.1-36.5-19-41.1-41.8-.3-1.6-1.3-1.3-2.3-1.3h-26.8c.8 10.6 3.2 20.3 8.5 29.2 24.2 40.5 82.7 48.5 128.2 37.4 49.9-12.3 67.3-54.9 67.4-106.3z"/></svg></span>
</a><a href=/feed.xml target=_blank rel="noopener noreferrer" aria-label="RSS feed"><span class=icon aria-hidden=true><svg viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM0 416a64 64 0 11128 0A64 64 0 110 416zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg></span></a></div></footer></div></body></html>