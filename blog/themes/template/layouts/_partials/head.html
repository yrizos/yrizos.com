<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ printf "%s | %s" .Title site.Title }}{{ end }}</title>
{{- $canonicalURL := .Params.canonical_url | default .Permalink -}}
<link rel="canonical" href="{{ $canonicalURL }}">
<link rel="icon" type="image/png" sizes="180x180" href="{{ "images/avatar/avatar-180x180-rounded.png" | relURL }}">
<link rel="icon" type="image/x-icon" href="{{ "images/avatar/avatar-180x180-rounded.ico" | relURL }}">
<link rel="apple-touch-icon" sizes="180x180" href="{{ "images/avatar/avatar-180x180-rounded.png" | relURL }}">
{{- if .IsHome }}
  {{- $description := site.Params.description | default site.Title -}}
  <meta name="description" content="{{ $description | htmlEscape }}">
  <meta name="author" content="{{ site.Title | htmlEscape }}">
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ site.Title | htmlEscape }}">
  <meta property="og:site_name" content="{{ site.Title | htmlEscape }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:description" content="{{ $description | htmlEscape }}">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{{ site.Title | htmlEscape }}">
  <meta name="twitter:description" content="{{ $description | htmlEscape }}">
  {{- with site.Params.social.twitter }}
  <meta name="twitter:site" content="{{ . | htmlEscape }}">
  <meta name="twitter:creator" content="{{ . | htmlEscape }}">
  {{- end }}
{{- else if .IsSection }}
  {{- $rawDescription := .Params.description | default .Summary | default .Content -}}
  {{- if not $rawDescription }}
    {{- if eq .Section "writing" }}
      {{- $rawDescription = "Articles about building systems meant to last, software architecture, engineering leadership, and the decisions that matter when building for the long term." -}}
    {{- else if eq .Section "reading" }}
      {{- $rawDescription = "Books I'm currently reading and my favorite reads." -}}
    {{- end }}
  {{- end }}
  {{- $description := strings.TrimSpace (truncate 200 (plainify $rawDescription)) -}}
  {{- if $description }}
    <meta name="description" content="{{ $description | htmlEscape }}">
  {{- end }}
  <meta name="author" content="{{ site.Title | htmlEscape }}">
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ .Title | htmlEscape }}">
  <meta property="og:site_name" content="{{ site.Title | htmlEscape }}">
  <meta property="og:url" content="{{ .Permalink }}">
  {{- if $description }}
    <meta property="og:description" content="{{ $description | htmlEscape }}">
  {{- end }}
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{{ .Title | htmlEscape }}">
  {{- if $description }}
    <meta name="twitter:description" content="{{ $description | htmlEscape }}">
  {{- end }}
  {{- with site.Params.social.twitter }}
  <meta name="twitter:site" content="{{ . | htmlEscape }}">
  <meta name="twitter:creator" content="{{ . | htmlEscape }}">
  {{- end }}
{{- else if .IsPage }}
  {{- $rawDescription := .Params.description | default .Params.summary | default .Summary | default .Content -}}
  {{- $description := strings.TrimSpace (truncate 200 (plainify $rawDescription)) -}}
  {{- if $description }}
    <meta name="description" content="{{ $description | htmlEscape }}">
  {{- end }}
  <meta name="author" content="{{ site.Title | htmlEscape }}">
  {{- $isArticle := or (eq .Section "writing") (eq .Params.type "posts") (eq .Params.type "talk") -}}
  <meta property="og:type" content="{{ if $isArticle }}article{{ else }}website{{ end }}">
  <meta property="og:title" content="{{ .Title | htmlEscape }}">
  <meta property="og:site_name" content="{{ site.Title | htmlEscape }}">
  <meta property="og:url" content="{{ .Permalink }}">
  {{- if $description }}
    <meta property="og:description" content="{{ $description | htmlEscape }}">
  {{- end }}
  {{- if $isArticle }}
    {{- with .PublishDate | default .Date }}
      <meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">
    {{- end }}
    {{- with .Lastmod }}
      <meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">
    {{- end }}
    <meta property="article:author" content="{{ site.Title | htmlEscape }}">
    {{- with .Params.tags }}
      {{- range first 10 . }}
        <meta property="article:tag" content="{{ . | htmlEscape }}">
      {{- end }}
    {{- end }}
  {{- end }}
  {{- with .Params.image }}
    {{- $imageResource := resources.Get . }}
    {{- if $imageResource }}
      <meta property="og:image" content="{{ $imageResource | absURL }}">
      <meta property="og:image:width" content="{{ $imageResource.Width }}">
      <meta property="og:image:height" content="{{ $imageResource.Height }}">
      {{- with $.Params.imageAlt | default $.Title }}
        <meta property="og:image:alt" content="{{ . | plainify | htmlEscape }}">
      {{- end }}
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:image" content="{{ $imageResource | absURL }}">
    {{- else }}
      <meta property="og:image" content="{{ . | absURL }}">
      {{- with $.Params.imageAlt | default $.Title }}
        <meta property="og:image:alt" content="{{ . | plainify | htmlEscape }}">
      {{- end }}
      <meta name="twitter:card" content="summary_large_image">
      <meta name="twitter:image" content="{{ . | absURL }}">
    {{- end }}
  {{- else }}
    <meta name="twitter:card" content="summary">
  {{- end }}
  <meta name="twitter:title" content="{{ .Title | htmlEscape }}">
  {{- if $description }}
    <meta name="twitter:description" content="{{ $description | htmlEscape }}">
  {{- end }}
  {{- with site.Params.social.twitter }}
  <meta name="twitter:site" content="{{ . | htmlEscape }}">
  <meta name="twitter:creator" content="{{ . | htmlEscape }}">
  {{- end }}
{{- end }}
{{- with site.Home.OutputFormats.Get "Feed" }}
<link rel="alternate" type="{{ .MediaType }}" href="{{ .Permalink | absURL }}" title="{{ site.Title }}">
{{- end }}
{{ partial "structured-data.html" . }}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Domine:wght@400..700&family=Inclusive+Sans:ital,wght@0,300..700;1,300..700&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{{- if and (or (eq .Type "talk") (eq .Params.type "talk")) .Params.slides_dir -}}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@glidejs/glide@3.6.0/dist/css/glide.core.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@glidejs/glide@3.6.0/dist/css/glide.theme.min.css">
<script src="https://cdn.jsdelivr.net/npm/@glidejs/glide@3.6.0"></script>
{{- end -}}
{{ partialCached "head/css.html" . }}
{{ partialCached "head/js.html" . }}
{{- with site.Params.analytics.goatcounter }}
<script data-goatcounter="{{ . }}" async src="//gc.zgo.at/count.js"></script>
{{- end }}
